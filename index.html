<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitch Race</title>
</head>
<body>

<script>
    // Initialize participants array
    var participants = [];

    // Function to start the race
    function startRace() {
        participants = [];
        // Nightbot response for starting the race
        $(document.body).trigger("addMessage", { message: "Race has started! Type !race to join." });
    }

    // Function to add a participant to the race
    function addParticipant(username) {
        participants.push(username);
    }

    // Function to end the race and select a winner
    function endRace() {
        var winner = participants[Math.floor(Math.random() * participants.length)];
        // Nightbot response for ending the race
        $(document.body).trigger("addMessage", { message: "The race has ended! The winner is: " + winner });
    }

    // Expose functions to Nightbot commands
    window.startRace = startRace;
    window.addParticipant = addParticipant;
    window.endRace = endRace;
</script>

</body>
</html>
